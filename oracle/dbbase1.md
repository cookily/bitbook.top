# 数据表管理
## 一、数据库设计
为什么？
	业务大+功能多=需要设计
设计好处：
（1）减少冗余（多余的相同数据）
（2）利于后期维护
设计步骤：
		-1-需求分析------>（从现实到信息世界（文字描述））
		-2-概要设计------>（文字--->图形化）
		-3-逻辑设计------>（图形化---->表（规范化））
		-4-物理实现
（一）需求分析
		步骤：
（1）收集信息
（2）标识对象
（3）标识属性
	-1- 主属性
	-2- 非主属性
	-3- 派生属性
	-4- 复合属性
（4）标识关系
（二）概要设计
	E-R图
组成：实体，关系，属性
	画E-R： 1.确定矩形，即实体
		   2.确定关系
		   3.补上属性
（三）详细设计
	1.将E-R图映射成表
		实体---表
		属性---字段
		关系---表与表之间的关系（主外键）
	2.规范化
		应用三大范式
		-1-第一范式（1NF）：保证每一列的原子性
		-2-第二范式（2NF）：每个表都描述一件事情，完全依赖（除主属性以外每一列都完全依赖于主键）
		-3-第三范式（3NF）：不允许出现传递依赖
## 二、物理实现
	（1）完整性约束
		数据完整性=数据+可靠+准确
（2）数据类型
    1. NUMBER：数值型，可以是整形或浮点，number(p,s)p:表示数字的总位数，s表示小数点后的位数，number（6,2），整数位最大值4位，小数点最大值2位，9999.99，后面的s可以省略不写。就表示整数。
    2. INT/INTEGER：相当于number（22）
    3. CHAR：表示固定长度的字符类型，char(n)，n表示占用字节数，最大2000字节，剩下的空白处自动用空格补
    4. NCHAR：使用unicode字符集编码存储字符类型
    5. VARCHAR2：表示变长的数据类型，varchar2(n)，最大长度是4000字节
    6. NVARCHAR2：使用unicode字符编码存储数据，最大值2000字符

    相比较之下，建议大家使用varchar2
    7. LONG：varchar2的加长版，最多4g，不能出现在查询条件中
    8. CLOB：用来代替LONG
    9. LOB：9-12TB的大数据对象
    10. DATE：常用的日期类型，公元前4712年1.1到公元9999年12月31，date类型在数据库中存储固定7个字节，格式：第一个字节：世纪+100，第二个字节：年+100（2位），第三个字节：月，第四个字节：天，第五字节：小时+1，第六个字节：分+1，第七个字节：秒+1。
    11. BLOB：用来存储二进制数据

（3）创建数据表
    语法：
    create table 表名
    (
        列名1 数据类型,
        列名2 数据类型,
        列名3 数据类型
    )
    --删除表：drop table
    --重命名：alter table 源表名 rename to 新表名
    --列重命名：
    --添加列：
    --修改列：
    --删除列：
	（4）约束
		（1）主键（主键约束）
			用来标识数据表中的每一行数据，在保证不为空的前提下，必须具备唯一性（不能重复）
            添加主键语法：alter table 表名 add constraint 主键名 primary key(列名)
            注意：一个表只能有一个主键
	删除主键：alter table 表名 drop primary key
（3）	复合主键
语法同主键
选取主键注意点：主键应该是对系统无意义的数据
				主键除了唯一标识一行以外，再无其他用途
				主键不应该包含动态变化的数据
			主键尽量建立在单列上。
（4）	唯一约束
alter table 表名 add constraint 约束名 unique(列名)
主键和唯一键区别：主键不允许出现空值，唯一可以出现，主键只能有一个，但是唯一键可以有多个。
	删除唯一约束语法：
		Alter table 表名 drop constraint 约束名

（5）	非空约束
指定单列值必须填写，不能为null
alter table 表名 modify 列名 not null
删除非空：将列设为null
（6）	默认值
指定列当没有写入数据时能以默认值呈现
默认值的添加必须在创建表的时候写入
（7）	检查约束（check约束）
对单列数据进行有效性验证
Alter table 表名 add constraint 约束名 check(约束条件)
（8）	外键约束
当数据表中的数据需要引用另一张表中的数据时必须建立外键约束。